{% extends 'admin/baseAdmin.html.twig' %}

{% block title %}Création de Live{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/live_form.css') }}">
{% endblock %}

{% block content %}
    <main class="live-creator-container">
        <form action="{{ path('admin_live_confirm') }}" method="post" class="live-form">
            <section class="form-section">
                <h2 class="section-title">Live Information</h2>
                <div class="form-group">
                    <input type="text" name="titre" id="titre" class="form-input" placeholder="Titre du live" required>
                </div>

                <div class="form-group">
                    <textarea name="description" id="description" class="form-input form-textarea" placeholder="Description du live..." required></textarea>
                </div>
            </section>

            <section class="form-section">
                <h2 class="section-title">Products to highlight</h2>
                <div class="products-grid">
                    {% for item in items %}
                        <label class="product-card-wrapper">
                            <input type="checkbox" name="items[]" value="{{ item.id_item }}" class="product-checkbox">
                            <article class="product-card">
                                <img src="{{ asset('uploads/' ~ item.images) }}" alt="{{ item.nameItem }}" class="product-image" loading="lazy">
                                <div class="product-info">
                                    <h3 class="product-name">{{ item.nameItem }}</h3>
                                    <div class="product-meta">
                                        <span class="product-category">{{ item.nameCategory }}</span>
                                        <span class="product-category">{{ item.stock_disponible }}</span>
                                    </div>
                                    <div class="product-price">{{ item.prix|number_format(2, '.', ' ') }} €</div>
                                    {% if item.namePromotion|length > 0 %}
                                        <span class="product-promo">-{{ item.percentage }}%</span>
                                    {% endif %}
                                </div>
                            </article>
                        </label>
                    {% endfor %}
                </div>
            </section>

            <div class="form-footer">
                <p class="warning-text">⚠️ Tous les champs sont obligatoires. Le live sera visible immédiatement après validation.</p>
                <button type="submit" class="submit-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                    Lancer le Live Shopping
                </button>
            </div>
        </form>
    </main>
{% endblock %}
